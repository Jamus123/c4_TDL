<!DOCTYPE html>
<html>
<head>

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">

    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
    <link rel='stylesheet' href='todo_styles.css'>
	

	<title>To Do List</title>
	<script>
		
// var todo_items=[
//     {
//       id: 0,
//       user_id: 1,
//       timeStamp: '2015/06/15 12:00:00',
//       title: 'get eggs',
//       details: 'get jumbo eggs from the supermarket',
//     },
//     {
//       id: 1,
//       user_id: 1,
//       timeStamp: '2015/06/16 04:00:32',
//       title: 'win at life',
//       details: 'by winning the lottery',
//     },
//         {
//       id: 2,
//       user_id: 1,
//       timeStamp: '2015/11/17 11:22:00',
//       title: 'proposition parris',
//       details: 'to go to the zoo'
//     }]

		function getServerList(){
			console.log('in getServerList');
			$.ajax({
					
					url: '../assets/get_todo_items.js',
					dataType:'json',
					crossDomain: true,
					cache: false,
					success: function(response){

						console.log('response: '+response);
						window.todo_objects = response;
						generateList(todo_objects);
						$('.task_list_container').on('click', '.task_entry', function(){

							// console.log('this: ' + $(this).attr('index_id'));
							// var current_index = $(this).attr('index_id')
							// var details_div = $('<div>',{
												
							// 					class:'task_details col-xs-12',
							// })

							// var details_span = $('<span>',{
							// 					text: todo_objects[current_index].details,
							// 					class: 'col-xs-6',

							// })

							// var initial_time = $('<span>',{
							// 					text:'Made: ' + todo_objects[current_index].timeStamp,
							// 					class: 'col-xs-2 col-xs-offset-1',
							// })

							// var due_time = $('<span>',{
							// 					text: 'Due: time_due',
							// 					class: 'col-xs-2 col-xs-offset-1',
							// })					


							// details_div.append(details_span, initial_time, due_time);
							// $(this).append(details_div);
						})

						// var current_task = 'task'+$(this).id
						// $(current_task).append()
	

					}

			})

		}

		// function viewTask(){
		// 	$(.task_list_container).on('click', '.task_entry', function(){
		// 		var details_div = $('<div>',{
		// 							text:'test',
		// 		})
		// 		$(this).append(details_div);
		// 	})

		// 	var current_task = 'task'+$(this).id
		// 	$(current_task).append()
		// }

		function generateList(todo_object_arr){
			
			console.log('in generateList')
		for (var i=0; i<todo_object_arr.length; i++){
			console.log('in for loop');
			var task_list_entry = $('<div>',{
										class: 'task_list col-xs-12',
										id: 'task'+todo_object_arr[i].id,
			});
			var task_title = $('<li>',{
								text: todo_object_arr[i].title,
								class: 'task_entry col-xs-6',
								index_id: todo_object_arr[i].id,
			});
			var edit_button = $('<button>',{
								text: 'Edit',
								type: 'button',
								class: 'col-xs-1 col-sm-offset-1 edit_task',

			});
			var delete_button = $('<button>',{
								text: 'Delete',
								type: 'button',
								class: 'col-xs-1 col-sm-offset-1 delete_task',

			});
			var task_complete = $('<button>',{
								text:'Completed',
								type: 'button',
								class: 'col-xs-1 col-sm-offset-1 completed_task',

			});

			console.log('this: ' + $(this).attr('index_id'));
							var current_index = $(this).attr('index_id')
							var details_div = $('<div>',{
												
												class:'task_details col-xs-12',
							})

							var details_span = $('<span>',{
												text: todo_objects[current_index].details,
												class: 'col-xs-6',

							})

							var initial_time = $('<span>',{
												text:'Made: ' + todo_objects[current_index].timeStamp,
												class: 'col-xs-2 col-xs-offset-1',
							})

							var due_time = $('<span>',{
												text: 'Due: time_due',
												class: 'col-xs-2 col-xs-offset-1',
							})					


							details_div.append(details_span, initial_time, due_time);
							

			task_list_entry.append(task_title, edit_button, delete_button, task_complete);
			(task_list_entry).append(details_div);
			$('.task_list_container').append(task_list_entry);

		}
	}

$(document).ready(function(){
	getServerList();

	// $('.task_list_container').on('click', '.task_entry', function(){

	// 			console.log($('this: ' + $(this)));
	// 			console.log('($this).index_id: ' + ($this).index_id);
	// 			var details_div = $('<div>',{
	// 								text:'test',
	// 								class:'task_details col-xs-12',
	// 			})

	// 			var details_span = $('<span>',{
	// 								//text: todo_objects[$(this).index_id].details,

	// 			})

	// 			details_div.append(details_span);
	// 			$(this).append(details_div);
	// 		})

	// 		var current_task = 'task'+$(this).id
	// 		$(current_task).append()
	


});


	</script>

</head>
<body>
	<div class='col-xs-12 container task_list_container'>
	<header class='col-xs-12'>
		<h1 class='col-xs-3 col-xs-offset-5'>Current Tasks</h1>
		
	</header>
	<!-- <div class='task_list col-xs-12'>
		<li class='task_entry col-xs-6'>Task Title</li>
			<button type='button' class='col-xs-1 col-sm-offset-1' id='edit_task'>Edit</button>
			<button type='button' class='col-xs-1 col-sm-offset-1' id='delete_task'>Delete</button>
			<button type='button' class='col-xs-1 col-sm-offset-1' id='completed_task'>Task Completed</button>
		
	</div> 
	<div class='task_list col-xs-12'>
		<li class='task_entry col-xs-6'>Task Title</li>
			<button type ='button' class='col-xs-1 col-sm-offset-1' id='edit_task'>Edit</button>
			<button type='button' class='col-xs-1 col-sm-offset-1' id='delete_task'>Delete</button>
			<button type='button' class='col-xs-1 col-sm-offset-1' id='completed_task'>Task Completed</button>
		
	</div>
	<div class='task_list col-xs-12'>
		<li class='task_entry col-xs-6'>Task Title</li>
			<button type ='button' class='col-xs-1 col-sm-offset-1' id='edit_task'>Edit</button>
			<button type='button' class='col-xs-1 col-sm-offset-1' id='delete_task'>Delete</button>
			<button type='button' class='col-xs-1 col-sm-offset-1' id='completed_task'>Task Completed</button>
		
	</div> -->
		
			
		

		
	</div>
</body>
</html>